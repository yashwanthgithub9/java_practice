<!DOCTYPE html>
<html>

<head>
  <title>ChatBot</title>
</head>

<body>
  <div class="js-container"></div>

  <script src="https://unpkg.com/supersimpledev/react.js"></script>
  <script src="https://unpkg.com/supersimpledev/react-dom.js"></script>

  <script src="https://unpkg.com/supersimpledev/babel.js"></script>
  <script src="https://unpkg.com/supersimpledev/dayjs.js"></script>

  <script type="text/babel">
    function ChatInput() {
      return (
        < >
          <input
            placeholder="Send message to chat bot"
            size="25">
          </input>
          <button>Send</button>
        </>
      );
    }
    function ChatMessage({ message, sender }) { //destructuring at parameter level
      // console.log(props);
      // const msg =props.message;
      // const sender = props.sender;
      // const {msg,sender}=props; --> msg worked when creating a const but it wont
      // work with object inside props;
      // const {message,sender}=props; //destructuring

      // if (sender=="robot") {
      //   return(
      //             <div>
      //   <img src="./robot.png" width="30"></img>
      //   {message}
      //   </div> 
      //   )
      // }
      return (
        <div>
          {sender === 'robot' && <img src="./robot.png" width="30" />}
          {message}
          {sender === 'user' && <img src="./user.png" width="30" />}
        </div>
      );
    }
    function ChatMessages(){
      const array = React.useState([{
        message:'Hellooo Chatbot',
        sender:'user',
        id:'id1'
      },{
        message:'Hellooo User',
        sender:'robot',
        id:'id2'
      },{
        message:'Get me Todays date',
        sender:'user',
        id:'id3'
      },{
        message:'Hellooo Chatbot',
        sender:'robot',
        id:'id4'
      }]);

      const chatMessages=array[0];
      const setChatMessages=array[1];

      function sendMessage(){
        // console.log('Message sent to console')
        // chatMessages.push({
        //   message:'test',
        //   sender:'user',
        //   id:crypto.randomUUID()
        // });
        setChatMessages(
          [
            ...chatMessages,
            {// this is added at the end of current message
              // if we just push its state won't change, hence it can't update UI
              message:'test state',
              sender:'user',
              id:crypto.randomUUID()
            }
          ]
        )
        console.log(chatMessages)
      };
      
      return(
        <>
          <button onClick={sendMessage}>Send Message</button>
          {chatMessages.map((chat)=>{
            return(
            <ChatMessage 
              message={chat.message}
              sender={chat.sender}
              key={chat.id}
            />
        );
      })}
      </>
      );
    }
    function App() {
      return(
        <>
        <ChatInput />
        <ChatMessages/>
        </>
      );
    }
    const container = document.querySelector('.js-container');
    ReactDOM.createRoot(container).render(<App/>);
  </script>
</body>

</html>